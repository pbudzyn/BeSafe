@model PlaceNetwork.Models.UserLoginModel
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="/Scripts/app/GoogleMaps.js"></script>
<!--<div class="row">
    <div style="float: left; height: 500px" class="col-xs-12 col-sm-8" id="map-canvas"></div>
    <div class="col-sm-1"></div>
    <div class="col-xs-12 col-sm-3" style="float:right; height:500px">
        <div class="list-group">
            <a href="#" class="list-group-item" onclick=getAllPlaces()>All places</a>
            <a href="#" class="list-group-item" onclick=getMyPlaces()>My places</a>
        </div>
    </div>
</div>-->
<div id="googleMap" style="width:auto;height:750px;"></div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add place</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label class="control-label">Title</label>
                        <input type="text" class="form-control" id="placeTitle">
                    </div>
                    <div class="form-group">
                        <label class="control-label">Description</label>
                        <textarea class="form-control" id="placeDescription"> </textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick=addPlace()>Save</button>
            </div>
        </div>
    </div>
</div>

<script>
    function initialize() {
        var map;
        var elevator;
        var myOptions = {
            zoom: 16,
            center: new google.maps.LatLng(49.8401724, 24.0296207),
            mapTypeId: 'terrain'
        };
        map = new google.maps.Map($('#googleMap')[0], myOptions);

        var result;
        $.ajax({
            dataType: "json",
            type: 'GET',
            url: '/api/place',
            async: false
        }).done(function (resp) {
            for (var i = 0; i < resp.length; i++) {
                var user = resp[i];
                for (var j = 0; j < user.UserPoints.length; j++) {
                    var p = user.UserPoints[j];
                    var latlng = new google.maps.LatLng(p.Latitude, p.Longitude);
                    new google.maps.Marker({
                        position: latlng,
                        map: map
                    });
                };
            };
        }).fail(function (resp) {
            //$.notify(resp.status + ": " + resp.statusText);
        });

        $.ajax({
            dataType: "json",
            type: 'GET',
            url: '/api/place/'+ model.Login.ToString(),
            async: false
        }).done(function (resp) {
            for (var i = 0; i < resp.length; i++) {
                var user = resp[i];
                for (var j = 0; j < user.UserPoints.length; j++) {
                    var p = user.UserPoints[j];
                    var latlng = new google.maps.LatLng(p.Latitude, p.Longitude);
                    new google.maps.Marker({
                        position: latlng,
                        map: map
                    });
                };
            };
        }).fail(function (resp) {
            //$.notify(resp.status + ": " + resp.statusText);
        });
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>